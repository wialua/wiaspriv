local library = loadstring(game:GetObjects("rbxassetid://7657867786")[1].Source)()

local PepsisWorld = library:CreateWindow({
    Name = "Wia Men√º Beta",
    Themeable = { Info = "Beta Version" }
})

local RunService = game:GetService('RunService')
local Players = game:GetService('Players')
local TeamsService = game:GetService("Teams")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Event = ReplicatedStorage:WaitForChild("Event")
local Mouse = Players.LocalPlayer:GetMouse()
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local PvpTab = PepsisWorld:CreateTab({ Name = "‚öîÔ∏è" })
local VehicleTab = PepsisWorld:CreateTab({ Name = "üöó" })
local ExtraTab = PepsisWorld:CreateTab({ Name = "üí∞" })
local AutoKillTab = PepsisWorld:CreateTab({ Name = "‚ò†Ô∏è" })
local HitboxTab = PepsisWorld:CreateTab({ Name = "üéØ" })
local SystemTab = PepsisWorld:CreateTab({ Name = "üõ†Ô∏è" })
local MusicTab = PepsisWorld:CreateTab({ Name = "üéµ" })
local ChatTab = PepsisWorld:CreateTab({ Name = "üí¨" })

local CombatSection = PvpTab:CreateSection({ Name = "Sava≈ü" })

CombatSection:AddButton({
    Name = "ESP A√ß",
    Callback = function()
        -- ESP A√ß Scripti
        local Players = game:GetService("Players")

        local function fixNameTag(player)
            local function apply()
                local char = player.Character
                if not char then return end
                local nameTag = char:FindFirstChild("NameTag")
                if nameTag then
                    nameTag.AlwaysOnTop = true
                    nameTag.MaxDistance = 10000
                end
            end

            if player.Character then apply() end

            player.CharacterAdded:Connect(function(char)
                char:WaitForChild("NameTag", 10)
                apply()
                local nameTag = char:FindFirstChild("NameTag")
                if nameTag then
                    nameTag:GetPropertyChangedSignal("AlwaysOnTop"):Connect(function()
                        nameTag.AlwaysOnTop = true
                    end)
                end
            end)
        end

        for _, player in ipairs(Players:GetPlayers()) do
            fixNameTag(player)
        end

        Players.PlayerAdded:Connect(fixNameTag)
    end
})

local CombatSection = PvpTab:CreateSection({ Name = "Sava≈ü" })

CombatSection:AddButton({
    Name = "ESP Kapat",
    Callback = function()
        -- ESP Kapat Scripti
        for _, player in pairs(game:GetService("Players"):GetChildren()) do
            local character = player.Character or player.CharacterAdded:Wait()
            local nameTag = character:FindFirstChild("NameTag")
            if nameTag then
                nameTag.AlwaysOnTop = false
                nameTag.MaxDistance = 10000
            end
        end

        game:GetService("Players").PlayerAdded:Connect(function(player)
            player.CharacterAdded:Connect(function(character)
                local nameTag = character:WaitForChild("NameTag", 10)
                if nameTag then
                    nameTag.AlwaysOnTop = false
                    nameTag.MaxDistance = 10000
                end
            end)
        end)
    end
})

local VehicleSpawnEventSection = VehicleTab:CreateSection({ Name = "Ara√ß Spawn (Sende Olanlar)" })
local selectedSpawnVehicle = "Fury"

VehicleSpawnEventSection:AddDropdown({
    Name = "Spawnlanacak Ara√ß",
    List = {"Fury", "Rhino", "Nighthawk", "Light Bike", "Thunderbird", "Warhawk", "Buzzard"},
    Callback = function(v) selectedSpawnVehicle = v end
})

VehicleSpawnEventSection:AddButton({
    Name = "Ara√ß Spawn (Sende Olanlar)",
    Callback = function()
        local args = {
            [1] = "SpawnVehicle",
            [2] = selectedSpawnVehicle
        }
        Event:FireServer(unpack(args))
    end
})

local VehicleSpawnSection = VehicleTab:CreateSection({ Name = "Ara√ß Spawnlama" })
local selectedVehicle = "Nighthawk"
VehicleSpawnSection:AddDropdown({
    Name = "Ara√ß Se√ß",
    List = {"Fury", "Rhino", "Nighthawk", "Light Bike", "Thunderbird", "Warhawk", "Buzzard"},
    Callback = function(v) selectedVehicle = v end
})
VehicleSpawnSection:AddButton({
    Name = "Se√ßilen Araca Bin",
    Callback = function()
        local char = LocalPlayer.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end
        local HRP = char.HumanoidRootPart
        local btp = Instance.new("Vector3Value", LocalPlayer)
        btp.Name = "btp"
        btp.Value = HRP.Position
        HRP.CFrame = Workspace.VehicleSpawns[selectedVehicle].Pos.CFrame
        wait()
        HRP.CFrame = CFrame.new(btp.Value)
        wait()
        local vehicle = Workspace.ObjectSelection[selectedVehicle]
        if vehicle then
            vehicle.DriveSeat.Disabled = false
            vehicle:MoveTo(HRP.Position)
            wait()
            HRP.CFrame = vehicle.DriveSeat.CFrame
            wait()
            vehicle.DriveSeat.Disabled = true
        end
        btp:Destroy()
    end
})

local VehicleSection = VehicleTab:CreateSection({ Name = "Ara√ß/U√ßak Hileleri" })

VehicleSection:AddButton({
    Name = "Super Car",
    Callback = function()
        -- Super Car Scripti
        local a = {Price=150000, Bounce=1, Height=3.5, Sway=13.5, Suspension=20, TurnSpeed=2, Torque=2, MaxSpeed=900, BrakeForce=1, SpeedDecay=0.2, Boost=true, BoostParticles="Middle", Drift=true, VelLerp=0.2, RotLerp=0.2, DriftVelLerp=0.1, DriftRotLerp=0.2, HideCharacter=true, CameraOffset=26}

        -- Ara√ß parametrelerini deƒüi≈ütirme
        for b, c in pairs(getgc(true)) do
            if type(c) == "table" then
                for d, e in pairs(a) do
                    if rawget(c, d) ~= nil then
                        c[d] = e
                    end
                end
            end
        end

        -- Aracƒ±n Boost deƒüerini ayarlama
        local f = workspace.ObjectSelection:FindFirstChild(game.Players.LocalPlayer.Name.."'s Vehicle")
        if f then
            pcall(function() 
                local g = f:FindFirstChild("CarChassis")
                if g then
                    local h = g:FindFirstChild("Boost")
                    if h then
                        h.Value = 20  -- Boost deƒüerini 20 yapƒ±yoruz
                    end
                end
            end)
        end
    end
})

VehicleSection:AddButton({
    Name = "Hƒ±zlƒ± D√∂nme",
    Callback = function()
        -- Night Hƒ±zlƒ± D√∂nme Scripti
        local _a = {Price = 4000000, MaxAltitude = 650, MaxSpeed = 240, Acceleration = 1, DampeningAcceleration = 0.8, MaxVerticalTilt = 10, VerticalTiltUpSpeed = 1, VerticalTiltDownSpeed = 1, VerticalTiltDampening = 0.95, VerticalSpeedLimit = 30, HorizontalTiltSpeed = 6, MaxSideTilt = 20, SideTiltSpeed = 0.9, SideTiltDampening = 0.95, TurnSpeed = 3.5, HideCharacter = true, CameraOffset = 50, Missiles = true, Bombs = true, Stealth = true, MissileTargetRange = 540, MissileCooldown = 2, MissileLock = 0}

        for i, v in pairs(getgc(true)) do
            if type(v) == "table" then
                for p, val in pairs(_a) do
                    if rawget(v, p) ~= nil then
                        v[p] = val
                    end
                end
            end
        end

        -- Bomba bƒ±rakma i≈ülemi
        local r = game.ReplicatedStorage:WaitForChild("Event")
        local u = game:GetService("UserInputService")

        u.InputBegan:Connect(function(i, p)
            if not p then
                if i.KeyCode == Enum.KeyCode.G then
                    r:FireServer("DropBomb")
                end
            end
        end)
    end
})

VehicleSection:AddButton({
    Name = "Suda Ara√ß S√ºrme",
    Callback = function()
        -- Suda Ara√ß S√ºrme Scripti
        for k,v in pairs(game:GetService("Workspace").Water:GetChildren()) do
            v.CanCollide = true
            v.Anchored = true
            v.Material = "Ice"  -- Suyun buz gibi olmasƒ±nƒ± saƒülƒ±yoruz
            v:Clone().Parent = v.Parent  -- Su objesinin bir kopyasƒ±nƒ± olu≈üturuyoruz
            v:Destroy()  -- Eski su objesini yok ediyoruz
        end

        -- Ocean objesinin adƒ±nƒ± deƒüi≈ütiriyoruz
        for i, v in pairs(game:GetService("Workspace"):GetDescendants()) do
            if v.Name == "Ocean" then
                v.Name = "NotWater"  -- Su yerine ba≈üka bir ad veriyoruz
            end
        end

        -- Yeni bir Water folder'ƒ± olu≈üturuyoruz
        local newfolder = Instance.new("Folder")
        newfolder.Name = "Water"
        newfolder.Parent = game:GetService("Workspace")

        -- Su objesinin ismini deƒüi≈ütiriyoruz
        wait(0.1)
        game:GetService("Workspace").Water.Name = "NotWaterBruh"  -- Su artƒ±k "NotWaterBruh" olacak
    end
})

local AutoKillSectionV1 = AutoKillTab:CreateSection({ Name = "Auto Kill V1 (BM - Hƒ±zlandƒ±rƒ±lmƒ±≈ü)" })
local RunService = game:GetService("RunService")
local TeamsService = game:GetService("Teams")
local Event = game.ReplicatedStorage:WaitForChild("Event")

local function createAutoKillToggleV1(teamName)
    local team = TeamsService:WaitForChild(teamName)
    local isActive = false  -- Toggle durumunu takip etmek i√ßin bir deƒüi≈üken
    local connection = nil  -- Heartbeat baƒülantƒ±sƒ±nƒ± tutacak deƒüi≈üken

    AutoKillSectionV1:AddToggle({
        Name = teamName,
        Value = false,
        Callback = function(value)
            isActive = value  -- Toggle'ƒ±n aktif durumunu g√ºncelle

            if value then
                -- Toggle a√ßƒ±ldƒ±ƒüƒ±nda, Heartbeat baƒülantƒ±sƒ±nƒ± olu≈ütur
                if connection then
                    connection:Disconnect()  -- √ñnceki baƒülantƒ±yƒ± kes
                end

                connection = RunService.Heartbeat:Connect(function()
                    if not isActive then
                        connection:Disconnect()  -- Toggle kapalƒ±ysa, baƒülantƒ±yƒ± kes
                        return
                    end

                    -- Takƒ±mdaki her oyuncuya i≈ülem yap
                    for _, player in pairs(team:GetPlayers()) do
                        if player.Character then
                            -- Karakterdeki t√ºm BasePart'larƒ± kontrol et
                            for _, part in pairs(player.Character:GetChildren()) do
                                if part:IsA("BasePart") then
                                    -- Event'i her BasePart i√ßin tetikle
                                    Event:FireServer("BM", part.Position)
                                end
                            end
                        end
                    end
                end)
            elseif connection then
                -- Eƒüer toggle kapalƒ±ysa, mevcut baƒülantƒ±yƒ± kes
                connection:Disconnect()
            end
        end
    })
end

-- Her bir takƒ±m i√ßin Auto Kill Toggle'ƒ±nƒ± olu≈ütur
for _, team in ipairs({"Prisoners", "Police", "Criminals", "Heroes", "Villains"}) do
    createAutoKillToggleV1(team)
end

local AutoKillSectionV2 = AutoKillTab:CreateSection({ Name = "Auto Kill V2 (BM Tetikle)" })
local function createAutoKillV2(teamName)
    local team = TeamsService:WaitForChild(teamName)
    local connection = nil
    AutoKillSectionV2:AddToggle({
        Name = "V2: " .. teamName,
        Value = false,
        Callback = function(enabled)
            if connection then
                connection:Disconnect()  -- √ñnceki baƒülantƒ±yƒ± kes
                connection = nil
            end

            if enabled then
                connection = RunService.Heartbeat:Connect(function()
                    for _, player in ipairs(team:GetPlayers()) do
                        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            Event:FireServer("BM", player.Character.HumanoidRootPart.Position)
                        end
                    end
                end)
            end
        end
    })
end
for _, team in ipairs({"Prisoners", "Police", "Criminals", "Heroes", "Villains"}) do
    createAutoKillV2(team)
end

local AutoKillPlayerSection = AutoKillTab:CreateSection({ Name = "Oyuncuya G√∂re Auto Kill" })
local selectedPlayerName = ""  -- Ba≈ülangƒ±√ßta bo≈ü bir oyuncu se√ßili
local autoKillConnection = nil

local function triggerBM(targetHRP)
    local targetPos = targetHRP.Position
    Event:FireServer("BM", targetPos)
    Event:FireServer("BM", targetPos)
end

local function triggerAttack(targetPlayerName)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local targetHRP = targetPlayer.Character.HumanoidRootPart
        task.spawn(function()
            triggerBM(targetHRP)
        end)
    end
end

local function updatePlayerList()
    local playerNames = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Name ~= LocalPlayer.Name then
            table.insert(playerNames, player.Name)
        end
    end
    return playerNames
end

AutoKillPlayerSection:AddDropdown({
    Name = "Oyuncu Se√ß",
    List = updatePlayerList(),
    Callback = function(selectedPlayer)
        selectedPlayerName = selectedPlayer
    end
})

AutoKillPlayerSection:AddToggle({
    Name = "Auto Kill Aktif",
    Value = false,
    Callback = function(enabled)
        if enabled then
            if selectedPlayerName ~= "" then
                if autoKillConnection then
                    autoKillConnection:Disconnect()
                end
                autoKillConnection = RunService.Heartbeat:Connect(function()
                    triggerAttack(selectedPlayerName)
                end)
            end
        else
            if autoKillConnection then
                autoKillConnection:Disconnect()
                autoKillConnection = nil
            end
        end
    end
})

local XPSection = ExtraTab:CreateSection({ Name = "XP & Para" })

-- Auto Farm Para
XPSection:AddButton({
    Name = "Auto Farm Para",
    Callback = function()
        -- Auto Farm Para Scripti
        getgenv().fps = false -- Makes The Map Invisable To Increase Fps
        getgenv().whitescreen = false -- Enables A White-Screen
        getgenv().Arrest = false -- Arrests Most Players Before AutoRobbing
        
        -- Scripti √áalƒ±≈ütƒ±rma
        loadstring(game:HttpGet("https://raw.githubusercontent.com/AdminEvilDRagon/smallAR/refs/heads/main/SmallAR.lua", true))()
    end
})

-- Crash
XPSection:AddButton({
    Name = "Crash",
    Callback = function()
        -- Crash Scripti
        if game.Players.LocalPlayer.Backpack:FindFirstChild("Shotgun") == nil then 
            game:GetService("StarterGui"):SetCore("SendNotification",{     
                Title = "Attention",     
                Text = "Envanterinde shotgun olmasƒ± gerek ve eline alma!",
                Duration = 7, 
            })
        else
            local plr = game.Players.LocalPlayer
            local char = plr.Character

            for i = 1, 20 do
                wait()
                workspace.ObjectSelection.Shotgun.Shotgun.Shotgun.Event:FireServer()
            end
            char.Humanoid:EquipTool(plr.Backpack.Shotgun)
            for i = 1, 8000 do
                game:GetService("ReplicatedStorage").Event:FireServer("ShootShotgun", workspace[plr.Name], Vector3.new(0, 0, 0), "Shotgun", "inf", "inf", "inf")
            end
            game:GetService("StarterGui"):SetCore("SendNotification",{     
                Title = "Crash Server Script",     
                Text = "Server Has Been Crashed",
                Duration = 7, 
            })
        end
    end
})

-- Keycard
XPSection:AddButton({
    Name = "Keycard",
    Callback = function()
        -- Keycard Scripti
        for i = 1, 50 do
            for i,v in pairs(game.Players:GetChildren()) do
                local args = {
                    [1] = "Pickpocket",
                    [2] = v
                }
                game:GetService("ReplicatedStorage").Event:FireServer(unpack(args))
            end
        end
    end
})

-- XP Scripti
XPSection:AddButton({
    Name = "XP Scripti",
    Callback = function()
        -- XP scripti entegre ediliyor
        game:GetService("ReplicatedStorage").RemoteFunction:InvokeServer("SetTeam", "Police")
        
        wait(0.5)
        for _, v in pairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
            if v.Name == "Handcuffs" then
                v.Parent = game:GetService("Players").LocalPlayer.Character
            end
        end

        for i = 1, 1000 do  
            game:GetService("RunService").RenderStepped:Connect(function()
                game:GetService("ReplicatedStorage").Event:FireServer("Eject", game:GetService("Players").LocalPlayer)
            end)
        end
    end
})

local HitboxSection = HitboxTab:CreateSection({ Name = "Ayarlar" })
local selectedTeams = {}
local isHitboxEnabled = false
local lastSize = 20
local lastTransparency = 0.5
local lastColor = Color3.fromRGB(255, 0, 0)
local hitboxConnection

local function applyHitbox(player)
    if player and player.Character and player.Character:FindFirstChild("Head") then
        local head = player.Character.Head
        head.Size = Vector3.new(lastSize, lastSize, lastSize)
        head.Transparency = lastTransparency
        head.BrickColor = BrickColor.new(lastColor)
        head.CanCollide = false
        head.Material = Enum.Material.ForceField
    end
end

local function resetHitbox(player)
    if player and player.Character and player.Character:FindFirstChild("Head") then
        local head = player.Character.Head
        head.Size = Vector3.new(2, 1, 1)
        head.Transparency = 0
        head.BrickColor = BrickColor.new("Medium stone grey")
        head.CanCollide = true
        head.Material = Enum.Material.Plastic
    end
end

local function updateHitboxes()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Team and table.find(selectedTeams, player.Team.Name) then
            applyHitbox(player)
        else
            resetHitbox(player)
        end
    end
end

HitboxSection:AddToggle({
    Name = "Hitbox Aktif",
    Value = false,
    Callback = function(state)
        isHitboxEnabled = state
        if state then
            if hitboxConnection then hitboxConnection:Disconnect() end
            hitboxConnection = RunService.Heartbeat:Connect(updateHitboxes)
        else
            if hitboxConnection then
                hitboxConnection:Disconnect()
                hitboxConnection = nil
            end
            for _, player in ipairs(Players:GetPlayers()) do
                resetHitbox(player)
            end
        end
    end
})

HitboxSection:AddSlider({ Name = "Boyut", Min = 1, Max = 20, Value = lastSize, Callback = function(v) lastSize = v end })
HitboxSection:AddSlider({ Name = "≈ûeffaflƒ±k", Min = 0, Max = 1, Value = lastTransparency, Callback = function(v) lastTransparency = v end })
HitboxSection:AddColorPicker({ Name = "Renk", Value = lastColor, Callback = function(v) lastColor = v end })

local TeamSection = HitboxTab:CreateSection({ Name = "Takƒ±m Se√ßimi" })
for _, team in ipairs({"Prisoners", "Police", "Criminals", "Heroes", "Villains"}) do
    TeamSection:AddToggle({
        Name = team,
        Value = false,
        Callback = function(value)
            if value then
                if not table.find(selectedTeams, team) then
                    table.insert(selectedTeams, team)
                end
            else
                for i, t in ipairs(selectedTeams) do
                    if t == team then
                        table.remove(selectedTeams, i)
                        break
                    end
                end
            end
            if isHitboxEnabled then
                updateHitboxes()
            end
        end
    })
end
-- ‚öîÔ∏è Super Punch
local SuperPunchSection = PvpTab:CreateSection({ Name = "Super Punch Geli≈ümi≈ü" })

local superPunchConnection
local superPunchDistance = 15
local selectedTargetPlayer = ""
local everyoneEnabled = false

-- Oyuncu listesi fonksiyonu
local function updatePlayerList()
    local names = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(names, player.Name)
        end
    end
    return names
end

-- SuperPunch ba≈ülatma
local function startSuperPunch()
    if superPunchConnection then return end
    superPunchConnection = RunService.Heartbeat:Connect(function()
        if not LocalPlayer.Character then return end
        local myHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if not myHRP then return end

        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChild("Humanoid") then
                local targetHRP = player.Character.HumanoidRootPart
                local distance = (myHRP.Position - targetHRP.Position).Magnitude

                if distance <= superPunchDistance then
                    if everyoneEnabled or player.Name == selectedTargetPlayer then
                        Event:FireServer("Punch", player.Character.Humanoid)
                    end
                end
            end
        end
    end)
end

local function stopSuperPunch()
    if superPunchConnection then
        superPunchConnection:Disconnect()
        superPunchConnection = nil
    end
end

-- Ayarlar
SuperPunchSection:AddDropdown({
    Name = "Hedef Oyuncu",
    List = updatePlayerList(),
    Callback = function(v)
        selectedTargetPlayer = v
    end
})

SuperPunchSection:AddToggle({
    Name = "Yakƒ±ndaki Herkese Uygula",
    Value = false,
    Callback = function(v)
        everyoneEnabled = v
    end
})

SuperPunchSection:AddSlider({
    Name = "Mesafe (Stud)",
    Min = 5,
    Max = 50,
    Value = 15,
    Callback = function(v)
        superPunchDistance = v
    end
})

SuperPunchSection:AddToggle({
    Name = "SuperPunch Aktif",
    Value = false,
    Callback = function(v)
        if v then
            startSuperPunch()
        else
            stopSuperPunch()
        end
    end
})

-- VR sistemi i√ßin blacklist ve ekran uyarƒ±sƒ± entegre edilmi≈ü versiyon

local CombatSection = PvpTab:CreateSection({ Name = "Sava≈ü" })
local playerDropdown = nil
local refreshButton = nil
local selectedPlayerName = nil
local isVRActive = false

-- Yasaklƒ± oyuncular listesi
local blacklist = {
    ["MAD_CITYAIMBOTLOL"] = true
}

-- ‚ö†Ô∏è Aktif uyarƒ± yazƒ±sƒ±nƒ± saklayacaƒüƒ±mƒ±z referans
local currentWarningGui = nil

-- Ekranda ortada yazƒ± √ßƒ±karan ve kalƒ±cƒ± olan fonksiyon
local function showPersistentScreenWarning(text)
    if currentWarningGui then currentWarningGui:Destroy() end

    local gui = Instance.new("ScreenGui")
    gui.Name = "PersistentWarning"
    gui.ResetOnSpawn = false
    gui.IgnoreGuiInset = true
    gui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    gui.DisplayOrder = 9999

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.8, 0, 0.1, 0)
    label.Position = UDim2.new(0.5, 0, 0.45, 0)
    label.AnchorPoint = Vector2.new(0.5, 0.5)
    label.BackgroundTransparency = 0.2
    label.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    label.TextColor3 = Color3.fromRGB(255, 85, 85)
    label.TextStrokeTransparency = 0.2
    label.Font = Enum.Font.FredokaOne
    label.TextScaled = true
    label.Text = text
    label.ZIndex = 9999
    label.Parent = gui

    currentWarningGui = gui
end

CombatSection:AddToggle({
    Name = "VR Aktif",
    Value = false,
    Callback = function(value)
        isVRActive = value
    end,
})

-- Oyuncu listesini g√ºncelleme fonksiyonu
local function updatePlayerList()
    local playerNames = {}
    for _, player in pairs(game:GetService("Players"):GetPlayers()) do
        if player.Name ~= game.Players.LocalPlayer.Name then
            table.insert(playerNames, player.Name)
        end
    end
    if playerDropdown then
        playerDropdown:UpdateList(playerNames)
    end
end

-- Dropdown olu≈üturuluyor (Blacklist kontrol√º entegre)
playerDropdown = CombatSection:AddDropdown({
    Name = "Oyuncu Se√ß",
    List = {},
    Callback = function(selectedPlayer)
        if blacklist[selectedPlayer] then
            showPersistentScreenWarning("BU OYUNCUYA KAR≈ûI KULLANAMAZSIN Lƒ∞STEDEN BA≈ûKA OYUNCU SE√á ‚ö†Ô∏è")
            selectedPlayerName = nil
            return
        end

        -- Eƒüer √∂nceden uyarƒ± varsa, kaldƒ±r
        if currentWarningGui then
            currentWarningGui:Destroy()
            currentWarningGui = nil
        end

        selectedPlayerName = selectedPlayer
    end,
    BlankValue = "Hi√ßbir oyuncu se√ßilmedi",
    Sort = true,
    Multi = false
})

-- Yenileme butonu
refreshButton = CombatSection:AddButton({
    Name = "Oyuncu Listesini Yenile",
    Callback = function()
        updatePlayerList()
    end
})

-- Mouse tƒ±klama i≈ülevi (VR saldƒ±rƒ±)
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.UserInputType == Enum.UserInputType.MouseButton1 and isVRActive then
        if selectedPlayerName then
            local selectedPlayer = game:GetService("Players"):FindFirstChild(selectedPlayerName)
            if selectedPlayer and selectedPlayer.Character then
                local args = {
                    [1] = "VR",
                    [2] = selectedPlayer.Character.HumanoidRootPart
                }
                game:GetService("ReplicatedStorage"):WaitForChild("Event"):FireServer(unpack(args))
            end
        end
    end
end)

-- Oyuncular deƒüi≈ütiƒüinde listeyi g√ºncelle
game:GetService("Players").PlayerAdded:Connect(function()
    updatePlayerList()
end)

game:GetService("Players").PlayerRemoving:Connect(function()
    updatePlayerList()
end)

-- Ba≈ülangƒ±√ßta listeyi y√ºkle
updatePlayerList()
-- üßç Admin Fly (geli≈ütirilmi≈ü)
local CharacterTab = PepsisWorld:CreateTab({ Name = "üßç" })
local CharacterSection = CharacterTab:CreateSection({ Name = "U√ßu≈ü Sistemi" })

local FlySpeed = 50
local flying = false
local flyConn = nil

CharacterSection:AddSlider({
	Name = "U√ßu≈ü Hƒ±zƒ±",
	Min = 10,
	Max = 150,
	Value = 50,
	Callback = function(v)
		FlySpeed = v
	end
})

CharacterSection:AddToggle({
	Name = "U√ßmayƒ± A√ß / Kapat",
	Value = false,
	Callback = function(state)
		local player = game.Players.LocalPlayer
		local char = player.Character or player.CharacterAdded:Wait()
		local hrp = char:WaitForChild("HumanoidRootPart")
		local humanoid = char:FindFirstChildOfClass("Humanoid")

		if state and not flying then
			flying = true
			if humanoid then humanoid.PlatformStand = true end

			local bg = Instance.new("BodyGyro", hrp)
			local bv = Instance.new("BodyVelocity", hrp)

			bg.P = 9e4
			bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
			bg.CFrame = hrp.CFrame

			bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
			bv.Velocity = Vector3.zero

			local uis = game:GetService("UserInputService")

			flyConn = game:GetService("RunService").Heartbeat:Connect(function()
				local cam = workspace.CurrentCamera
				local move = Vector3.zero

				if uis:IsKeyDown(Enum.KeyCode.W) then move += cam.CFrame.LookVector end
				if uis:IsKeyDown(Enum.KeyCode.S) then move -= cam.CFrame.LookVector end
				if uis:IsKeyDown(Enum.KeyCode.A) then move -= cam.CFrame.RightVector end
				if uis:IsKeyDown(Enum.KeyCode.D) then move += cam.CFrame.RightVector end
				if uis:IsKeyDown(Enum.KeyCode.Space) then move += cam.CFrame.UpVector end
				if uis:IsKeyDown(Enum.KeyCode.LeftControl) then move -= cam.CFrame.UpVector end

				bg.CFrame = cam.CFrame
				if move.Magnitude > 0 then
					bv.Velocity = move.Unit * FlySpeed
				else
					bv.Velocity = Vector3.zero
				end
			end)
		else
			flying = false
			if flyConn then flyConn:Disconnect() flyConn = nil end
			for _,v in pairs(hrp:GetChildren()) do
				if v:IsA("BodyGyro") or v:IsA("BodyVelocity") then
					v:Destroy()
				end
			end
			if humanoid then humanoid.PlatformStand = false end
		end
	end
})

local NoclipEnabled = false
local NoclipConnection = nil

CharacterSection:AddToggle({
	Name = "Noclip A√ß / Kapat",
	Value = false,
	Callback = function(state)
		NoclipEnabled = state

		if state then
			NoclipConnection = game:GetService("RunService").Stepped:Connect(function()
				local char = game.Players.LocalPlayer.Character
				if char then
					for _,v in pairs(char:GetDescendants()) do
						if v:IsA("BasePart") and v.CanCollide then
							v.CanCollide = false
						end
					end
				end
			end)
		else
			if NoclipConnection then
				NoclipConnection:Disconnect()
				NoclipConnection = nil
			end
		end
	end
})

local JumpPower = 50

CharacterSection:AddSlider({
	Name = "Zƒ±plama G√ºc√º",
	Min = 50,
	Max = 300,
	Value = 50,
	Callback = function(val)
		JumpPower = val
		local char = game.Players.LocalPlayer.Character
		if char and char:FindFirstChildOfClass("Humanoid") then
			char:FindFirstChildOfClass("Humanoid").JumpPower = JumpPower
		end
	end
})

-- ‚úÖ SystemTab: Ultimate Anti Kick Sistemi
local SystemTab = PepsisWorld:CreateTab({ Name = "üõ†Ô∏è" })
local ProtectionSection = SystemTab:CreateSection("Geli≈ümi≈ü Anti Kick")

-- üß± Servisler
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")

-- üö´ Roblox Tarihinin En Geli≈ümi≈ü Anti Kick Sistemi

-- üõ°Ô∏è T√ºm __namecall √ºzerinden gelen Kick'leri engelle
local mt = getrawmetatable(game)
setreadonly(mt, false)

local oldNamecall = mt.__namecall
mt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()
    local args = { ... }

    if method == "Kick" then
        warn("üö´ AntiKick: __namecall ile yakalandƒ± (", tostring(self), ")")
        return
    end

    return oldNamecall(self, unpack(args))
end)

-- üß† LocalPlayer:Kick() ‚Üí hookfunction
local successLocalKick, _ = pcall(function()
    return hookfunction(LocalPlayer.Kick, newcclosure(function(...)
        warn("üö´ AntiKick: LocalPlayer:Kick() yakalandƒ± (hookfunction)")
        return
    end))
end)

-- üß† game:Kick() ‚Üí global hookfunction
local successGameKick, _ = pcall(function()
    return hookfunction(game.Kick, newcclosure(function(...)
        warn("üö´ AntiKick: game:Kick() yakalandƒ± (hookfunction)")
        return
    end))
end)

local UltraSection = SystemTab:CreateSection("Ultra Lag Cleaner (Optimize)")

local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local SoundService = game:GetService("SoundService")
local CoreGui = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local UserSettings = UserSettings()
local RenderSettings = UserSettings.GameSettings

local cleanerRunning = false
local soundMuted = false
local lightingOptimized = false

UltraSection:AddToggle({
	Name = "üß† Optimize Lag Cleaner + CPU Saver",
	Value = false,
	Callback = function(state)
		cleanerRunning = state
		if state then
			warn("‚öôÔ∏è Ultra Lag Cleaner (Optimize) aktif edildi.")

			-- üéÆ Grafik kalitesini s√ºrekli olarak 1'e sabitle
			task.spawn(function()
				while cleanerRunning do
					pcall(function()
						RenderSettings.SavedQualityLevel = Enum.SavedQualitySetting.QualityLevel1
					end)
					task.wait(10)
				end
			end)

			-- üí° Lag temizleyici loop
			task.spawn(function()
				while cleanerRunning do
					-- 1. Lag Objelerini Sil (sadece belirli tipler)
					for _, obj in ipairs(workspace:GetDescendants()) do
						local class = obj.ClassName
						if class == "ParticleEmitter" or class == "Trail" or class == "Smoke" or class == "Fire"
							or class == "Explosion" or class == "ForceField" or class == "SelectionBox"
							or class == "SelectionPartLasso" or class == "Weld" or class == "Attachment" then
							pcall(function() obj:Destroy() end)
						elseif class == "Decal" then
							obj.Transparency = 1
						elseif obj:IsA("BasePart") then
							obj.Material = Enum.Material.Plastic
							obj.Reflectance = 0
						end
					end

					-- 2. Lighting ayarlarƒ± (sadece ilk √ßalƒ±≈ümada)
					if not lightingOptimized then
						for _, effect in ipairs(Lighting:GetChildren()) do
							if effect:IsA("BlurEffect") or effect:IsA("SunRaysEffect") or effect:IsA("ColorCorrectionEffect") or effect:IsA("BloomEffect") then
								effect.Enabled = false
							end
						end
						Lighting.GlobalShadows = false
						Lighting.FogEnd = 1e10
						lightingOptimized = true
					end

					-- 3. Sesleri sadece bir kez mute et
					if not soundMuted then
						for _, s in ipairs(workspace:GetDescendants()) do
							if s:IsA("Sound") then
								s.Volume = 0
							end
						end
						SoundService.AmbientReverb = Enum.ReverbType.NoReverb
						soundMuted = true
					end

					-- 4. GUI temizliƒüi (sadece pasif GUI'ler)
					for _, gui in ipairs(CoreGui:GetChildren()) do
						if gui:IsA("ScreenGui") and not gui.Enabled then
							pcall(function() gui:Destroy() end)
						end
					end

					-- 5. FPS panelini kapat
					pcall(function()
						local perfStats = CoreGui:FindFirstChild("PerformanceStats")
						if perfStats then perfStats:Destroy() end
						StarterGui:SetCore("PerformanceStatsVisible", false)
					end)

					-- 6. CPU saver: FPS'i sƒ±nƒ±rlamak isteyenler i√ßin
					if setfpscap then
						setfpscap(60)
					end

					task.wait(15)
				end
			end)
		else
			warn("‚èπÔ∏è Optimize Lag Cleaner durduruldu.")
			lightingOptimized = false
			soundMuted = false
		end
	end
})
