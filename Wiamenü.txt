-- Wia Men√º | Full Revize | Premium UI
local library = loadstring(game:GetObjects("rbxassetid://7657867786")[1].Source)()

local PepsisWorld = library:CreateWindow({
	Name = "Wia Men√º | Revize",
	Themeable = { Info = "Tam S√ºr√ºm" }
})

-- Gerekli Servisler
local RunService = game:GetService('RunService')
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService('Players')
local Teams = game:GetService("Teams")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local Event = ReplicatedStorage:WaitForChild("Event")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- Sekmeler
local CombatTab = PepsisWorld:CreateTab({ Name = "ü•ä" })
local VehicleTab = PepsisWorld:CreateTab({ Name = "üöò" })
local AutoKillTab = PepsisWorld:CreateTab({ Name = "üöÄ" })
local HitboxTab = PepsisWorld:CreateTab({ Name = "üéØ" })
local ExtraTab = PepsisWorld:CreateTab({ Name = "üíº" })
local CharacterTab = PepsisWorld:CreateTab({ Name = "üßç" })
local SystemTab = PepsisWorld:CreateTab({ Name = "üì≥" })

-- ===================== ü•ä SAVA≈û =====================
local CombatSection = CombatTab:CreateSection({ Name = "ESP Kontrol" })

CombatSection:AddButton({
	Name = "ESP A√ß",
	Callback = function()
		local function fixNameTag(player)
			local function apply()
				local char = player.Character
				if not char then return end
				local nameTag = char:FindFirstChild("NameTag")
				if nameTag then
					nameTag.AlwaysOnTop = true
					nameTag.MaxDistance = 10000
				end
			end
			if player.Character then apply() end
			player.CharacterAdded:Connect(function(char)
				char:WaitForChild("NameTag", 10)
				apply()
			end)
		end
		for _, player in ipairs(Players:GetPlayers()) do
			fixNameTag(player)
		end
		Players.PlayerAdded:Connect(fixNameTag)
	end
})

CombatSection:AddButton({
	Name = "ESP Kapat",
	Callback = function()
		for _, player in pairs(Players:GetChildren()) do
			local character = player.Character or player.CharacterAdded:Wait()
			local nameTag = character:FindFirstChild("NameTag")
			if nameTag then
				nameTag.AlwaysOnTop = false
				nameTag.MaxDistance = 10000
			end
		end
	end
})
-- ===================== üöò ARA√áLAR =====================
local VehicleSpawnSection = VehicleTab:CreateSection({ Name = "Ara√ß Spawnlama (T√ºm Ara√ßlar)" })
local selectedVehicle = "Nero"

VehicleSpawnSection:AddDropdown({
	Name = "Ara√ß Se√ß",
	List = {"Nero", "Rhino", "Nighthawk", "Light Bike", "Thunderbird", "Warhawk", "Buzzard", "Fury"},
	Callback = function(v) selectedVehicle = v end
})

VehicleSpawnSection:AddButton({
	Name = "Ara√ß Spawnla",
	Callback = function()
		local args = {
			[1] = "SpawnVehicle",
			[2] = selectedVehicle
		}
		Event:FireServer(unpack(args))
	end
})

VehicleSpawnSection:AddButton({
	Name = "Spawnlanana Bin",
	Callback = function()
		local char = LocalPlayer.Character
		if not char or not char:FindFirstChild("HumanoidRootPart") then return end
		local HRP = char.HumanoidRootPart
		local btp = Instance.new("Vector3Value", LocalPlayer)
		btp.Name = "btp"
		btp.Value = HRP.Position
		HRP.CFrame = Workspace.VehicleSpawns[selectedVehicle].Pos.CFrame
		wait()
		HRP.CFrame = CFrame.new(btp.Value)
		wait()
		local vehicle = Workspace.ObjectSelection[selectedVehicle]
		if vehicle then
			vehicle.DriveSeat.Disabled = false
			vehicle:MoveTo(HRP.Position)
			wait()
			HRP.CFrame = vehicle.DriveSeat.CFrame
			wait()
			vehicle.DriveSeat.Disabled = true
		end
		btp:Destroy()
	end
})

local BoostSection = VehicleTab:CreateSection({ Name = "Performans & Boost" })

BoostSection:AddButton({
	Name = "Super Car",
	Callback = function()
		-- Ara√ß parametrelerini g√ºncelle
		local propertyValues = {
			Sway = 20,
			Torque = 7,
			MaxSpeed = 900,
			TurnSpeed = 1.7,
			DriftVelLerp = 0.45,
			DriftRotLerp = 0.12,
		}

		for _, v in pairs(getgc(true)) do
			if type(v) == "table" then
				for property, value in pairs(propertyValues) do
					if rawget(v, property) ~= nil then
						v[property] = value
					end
				end
			end
		end

		-- Boost deƒüeri ayarƒ±
		local playerVehicle = workspace.ObjectSelection:FindFirstChild(game.Players.LocalPlayer.Name.."'s Vehicle")
		if playerVehicle then
			pcall(function()
				local carChassis = playerVehicle:FindFirstChild("CarChassis")
				if carChassis then
					local boost = carChassis:FindFirstChild("Boost")
					if boost then
						boost.Value = 20
					end
				end
			end)
		end
	end
})

BoostSection:AddButton({
	Name = "Hƒ±zlƒ± D√∂n√º≈ü (U√ßak)",
	Callback = function()
		local propertyValues = {
			Acceleration = 1,
			HorizontalTiltSpeed = 7.3,
			MissileCooldown = 2,
			MissileLock = 0,
			SideTiltSpeed = 1.5,
			MaxSideTilt = 25,
		}

		for i, v in pairs(getgc(true)) do
			if type(v) == "table" then
				for property, value in pairs(propertyValues) do
					if rawget(v, property) ~= nil then
						v[property] = value
					end
				end
			end
		end

		-- Bombayƒ± anƒ±nda bƒ±rak (G tu≈üuna basƒ±ldƒ±ƒüƒ±nda)
		local Remote = game.ReplicatedStorage:WaitForChild("Event")
		local UserInputService = game:GetService("UserInputService")

		UserInputService.InputBegan:Connect(function(input, gameProcessed)
			if not gameProcessed and input.KeyCode == Enum.KeyCode.G then
				Remote:FireServer("DropBomb")
			end
		end)
	end
})

local OtherSection = VehicleTab:CreateSection({ Name = "√ñzel Ara√ß Hileleri" })

OtherSection:AddButton({
	Name = "Suda Ara√ß S√ºrme",
	Callback = function()
		for k,v in pairs(Workspace.Water:GetChildren()) do
			v.CanCollide = true
			v.Anchored = true
			v.Material = "Ice"
			v:Clone().Parent = v.Parent
			v:Destroy()
		end
		for i, v in pairs(Workspace:GetDescendants()) do
			if v.Name == "Ocean" then v.Name = "NotWater" end
		end
		local newfolder = Instance.new("Folder")
		newfolder.Name = "Water"
		newfolder.Parent = Workspace
		wait(0.1)
		Workspace.Water.Name = "NotWaterBruh"
	end
})

OtherSection:AddToggle({
	Name = "üï∂Ô∏è Sonsuz Stealth (Night)",
	Value = false,
	Callback = function(state)
		if state then
			_G.StealthLoop = RunService.RenderStepped:Connect(function()
				pcall(function()
					Event:FireServer("StealthMode", true)
				end)
			end)
		else
			pcall(function()
				Event:FireServer("StealthMode", false)
				task.wait(0.2)
				Event:FireServer("StealthMode", false)
			end)
			if _G.StealthLoop then
				_G.StealthLoop:Disconnect()
				_G.StealthLoop = nil
			end
		end
	end
})

-- ===================== üéØ AUTO KILL =====================
local AutoKillPlayerSection = AutoKillTab:CreateSection({ Name = "Oyuncuya √ñzel Auto Kill V1 (10x BM)" })

local selectedPlayerName = ""
local autoKillLoop = nil
local playerDropdown = nil

-- üîí Kara liste (dokunulmaz oyuncular)
local blacklist = {
	["MAD_CITYAIMBOTLOL"] = true
}

-- G√ºncel oyuncu listesi
local function getUpdatedPlayerList()
	local list = {}
	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			table.insert(list, player.Name)
		end
	end
	return list
end

local function refreshDropdown()
	if playerDropdown then
		playerDropdown:UpdateList(getUpdatedPlayerList())
	end
end

Players.PlayerAdded:Connect(refreshDropdown)
Players.PlayerRemoving:Connect(refreshDropdown)

playerDropdown = AutoKillPlayerSection:AddDropdown({
	Name = "Hedef Oyuncu",
	List = getUpdatedPlayerList(),
	Callback = function(playerName)
		selectedPlayerName = playerName

		if blacklist[playerName] then
			game.StarterGui:SetCore("SendNotification", {
				Title = "‚ùå Korumalƒ± Oyuncu",
				Text = playerName .. " Auto Kill'den muaf!",
				Duration = 5
			})
			selectedPlayerName = "" -- Hedef bo≈üaltƒ±lƒ±r, hi√ßbir i≈ülem yapƒ±lmaz
		end
	end
})

local function fireBM10xAtParts(player)
	if player and player.Character then
		for _, part in pairs(player.Character:GetChildren()) do
			if part:IsA("BasePart") then
				for i = 1, 10 do
					Event:FireServer("BM", part.Position)
				end
			end
		end
	end
end

AutoKillPlayerSection:AddToggle({
	Name = "Auto Kill Aktif",
	Value = false,
	Callback = function(enabled)
		if enabled and selectedPlayerName ~= "" and not blacklist[selectedPlayerName] then
			if autoKillLoop then autoKillLoop:Disconnect() end
			autoKillLoop = task.spawn(function()
				while true do
					local target = Players:FindFirstChild(selectedPlayerName)
					if target then fireBM10xAtParts(target) end
					task.wait()
				end
			end)
		else
			if autoKillLoop then
				pcall(function() task.cancel(autoKillLoop) end)
				autoKillLoop = nil
			end
		end
	end
})
-- ===================== üß† HITBOX =====================
local HitboxSection = HitboxTab:CreateSection({ Name = "Hitbox Ayarlarƒ±" })
local TeamSection = HitboxTab:CreateSection({ Name = "Takƒ±m Se√ßimi" })

local selectedTeams = {}
local isHitboxEnabled = false
local lastSize = 20
local lastTransparency = 0.5
local lastColor = Color3.fromRGB(255, 0, 0)
local hitboxConnection = nil

local function applyHitbox(player)
	if player and player.Character and player.Character:FindFirstChild("Head") then
		local head = player.Character.Head
		head.Size = Vector3.new(lastSize, lastSize, lastSize)
		head.Transparency = lastTransparency
		head.BrickColor = BrickColor.new(lastColor)
		head.CanCollide = false
		head.Material = Enum.Material.ForceField
	end
end

local function resetHitbox(player)
	if player and player.Character and player.Character:FindFirstChild("Head") then
		local head = player.Character.Head
		head.Size = Vector3.new(2, 1, 1)
		head.Transparency = 0
		head.BrickColor = BrickColor.new("Medium stone grey")
		head.CanCollide = true
		head.Material = Enum.Material.Plastic
	end
end

local function updateHitboxes()
	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Team and table.find(selectedTeams, player.Team.Name) then
			applyHitbox(player)
		else
			resetHitbox(player)
		end
	end
end

HitboxSection:AddToggle({
	Name = "Hitbox Aktif",
	Value = false,
	Callback = function(state)
		isHitboxEnabled = state
		if state then
			if hitboxConnection then hitboxConnection:Disconnect() end
			hitboxConnection = RunService.Heartbeat:Connect(updateHitboxes)
		else
			if hitboxConnection then
				hitboxConnection:Disconnect()
				hitboxConnection = nil
			end
			for _, player in ipairs(Players:GetPlayers()) do
				resetHitbox(player)
			end
		end
	end
})

HitboxSection:AddSlider({
	Name = "Boyut",
	Min = 1,
	Max = 20,
	Value = lastSize,
	Callback = function(v)
		lastSize = v
	end
})

HitboxSection:AddSlider({
	Name = "≈ûeffaflƒ±k",
	Min = 0,
	Max = 1,
	Value = lastTransparency,
	Callback = function(v)
		lastTransparency = v
	end
})

HitboxSection:AddColorPicker({
	Name = "Renk",
	Value = lastColor,
	Callback = function(v)
		lastColor = v
	end
})

for _, team in ipairs({"Prisoners", "Police", "Criminals", "Heroes", "Villains"}) do
	TeamSection:AddToggle({
		Name = team,
		Value = false,
		Callback = function(value)
			if value then
				if not table.find(selectedTeams, team) then
					table.insert(selectedTeams, team)
				end
			else
				for i, t in ipairs(selectedTeams) do
					if t == team then
						table.remove(selectedTeams, i)
						break
					end
				end
			end
			if isHitboxEnabled then updateHitboxes() end
		end
	})
end

-- ===================== üíº EKSTRA =====================
local XPSection = ExtraTab:CreateSection({ Name = "Para / XP / Ara√ßlar" })

XPSection:AddButton({
	Name = "Auto Farm Para",
	Callback = function()
		getgenv().fps = false
		getgenv().whitescreen = false
		getgenv().Arrest = false
		loadstring(game:HttpGet("https://raw.githubusercontent.com/AdminEvilDRagon/smallAR/refs/heads/main/SmallAR.lua", true))()
	end
})

XPSection:AddButton({
	Name = "Keycard √áek",
	Callback = function()
		for i = 1, 50 do
			for i, v in pairs(Players:GetChildren()) do
				local args = {
					[1] = "Pickpocket",
					[2] = v
				}
				Event:FireServer(unpack(args))
			end
		end
	end
})

XPSection:AddButton({
	Name = "XP Scripti",
	Callback = function()
		ReplicatedStorage.RemoteFunction:InvokeServer("SetTeam", "Police")
		wait(0.5)
		for _, v in pairs(LocalPlayer.Backpack:GetChildren()) do
			if v.Name == "Handcuffs" then
				v.Parent = LocalPlayer.Character
			end
		end
		for i = 1, 1000 do  
			RunService.RenderStepped:Connect(function()
				Event:FireServer("Eject", LocalPlayer)
			end)
		end
	end
})

XPSection:AddButton({
	Name = "üí• Server Crash",
	Callback = function()
		local plr = LocalPlayer
		if plr.Backpack:FindFirstChild("Shotgun") == nil then
			game.StarterGui:SetCore("SendNotification",{     
				Title = "Uyarƒ±",     
				Text = "Shotgun envanterinde ve elinde olmalƒ±!",
				Duration = 5
			})
		else
			local char = plr.Character
			for i = 1, 20 do wait()
				workspace.ObjectSelection.Shotgun.Shotgun.Shotgun.Event:FireServer()
			end
			char.Humanoid:EquipTool(plr.Backpack.Shotgun)
			for i = 1, 8000 do
				ReplicatedStorage.Event:FireServer("ShootShotgun", workspace[plr.Name], Vector3.new(0, 0, 0), "Shotgun", "inf", "inf", "inf")
			end
			game.StarterGui:SetCore("SendNotification",{     
				Title = "C R A S H",     
				Text = "Sunucu √ß√∂kt√º!",
				Duration = 7 
			})
		end
	end
})


-- ===================== üßç KARAKTER =====================
local CharacterSection = CharacterTab:CreateSection({ Name = "U√ßu≈ü / Ge√ßi≈ü / Zƒ±plama" })

local FlySpeed = 50
local flying = false
local flyConn = nil

CharacterSection:AddSlider({
	Name = "U√ßu≈ü Hƒ±zƒ±",
	Min = 10,
	Max = 150,
	Value = 50,
	Callback = function(v)
		FlySpeed = v
	end
})

CharacterSection:AddToggle({
	Name = "U√ßmayƒ± A√ß / Kapat",
	Value = false,
	Callback = function(state)
		local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
		local hrp = char:WaitForChild("HumanoidRootPart")
		local humanoid = char:FindFirstChildOfClass("Humanoid")

		if state and not flying then
			flying = true
			if humanoid then humanoid.PlatformStand = true end

			local bg = Instance.new("BodyGyro", hrp)
			local bv = Instance.new("BodyVelocity", hrp)

			bg.P = 9e4
			bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
			bg.CFrame = hrp.CFrame

			bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
			bv.Velocity = Vector3.zero

			local uis = game:GetService("UserInputService")

			flyConn = RunService.Heartbeat:Connect(function()
				local cam = workspace.CurrentCamera
				local move = Vector3.zero

				if uis:IsKeyDown(Enum.KeyCode.W) then move += cam.CFrame.LookVector end
				if uis:IsKeyDown(Enum.KeyCode.S) then move -= cam.CFrame.LookVector end
				if uis:IsKeyDown(Enum.KeyCode.A) then move -= cam.CFrame.RightVector end
				if uis:IsKeyDown(Enum.KeyCode.D) then move += cam.CFrame.RightVector end
				if uis:IsKeyDown(Enum.KeyCode.Space) then move += cam.CFrame.UpVector end
				if uis:IsKeyDown(Enum.KeyCode.LeftControl) then move -= cam.CFrame.UpVector end

				bg.CFrame = cam.CFrame
				bv.Velocity = move.Magnitude > 0 and move.Unit * FlySpeed or Vector3.zero
			end)
		else
			flying = false
			if flyConn then flyConn:Disconnect() flyConn = nil end
			for _,v in pairs(hrp:GetChildren()) do
				if v:IsA("BodyGyro") or v:IsA("BodyVelocity") then
					v:Destroy()
				end
			end
			if humanoid then humanoid.PlatformStand = false end
		end
	end
})

local NoclipConnection = nil

CharacterSection:AddToggle({
	Name = "Noclip A√ß / Kapat",
	Value = false,
	Callback = function(state)
		if state then
			NoclipConnection = RunService.Stepped:Connect(function()
				local char = LocalPlayer.Character
				if char then
					for _,v in pairs(char:GetDescendants()) do
						if v:IsA("BasePart") and v.CanCollide then
							v.CanCollide = false
						end
					end
				end
			end)
		else
			if NoclipConnection then
				NoclipConnection:Disconnect()
				NoclipConnection = nil
			end
		end
	end
})

local JumpPower = 50

CharacterSection:AddSlider({
	Name = "Zƒ±plama G√ºc√º",
	Min = 50,
	Max = 300,
	Value = 50,
	Callback = function(val)
		JumpPower = val
		local char = LocalPlayer.Character
		if char and char:FindFirstChildOfClass("Humanoid") then
			char:FindFirstChildOfClass("Humanoid").JumpPower = JumpPower
		end
	end
})

-- ===================== ‚öôÔ∏è Sƒ∞STEM =====================
local ServerhopSection = SystemTab:CreateSection({ Name = "Sunucu ƒ∞≈ülemleri" })

-- üåê Server Hop
local function serverHop()
	local PlaceId = game.PlaceId
	local JobId = game.JobId
	local servers = {}

	local function fetchServers(cursor)
		local url = "https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?limit=100"
		if cursor then url = url .. "&cursor=" .. cursor end

		local response = game:HttpGet(url)
		local data = HttpService:JSONDecode(response)

		for _, server in pairs(data.data) do
			if server.playing < server.maxPlayers and server.id ~= JobId then
				table.insert(servers, server.id)
			end
		end

		if data.nextPageCursor then
			fetchServers(data.nextPageCursor)
		end
	end

	pcall(function() fetchServers() end)

	if #servers > 0 then
		local randomServer = servers[math.random(1, #servers)]
		local success, err = pcall(function()
			TeleportService:TeleportToPlaceInstance(PlaceId, randomServer, Players.LocalPlayer)
		end)

		if not success then
			warn("‚ö†Ô∏è Teleport ba≈üarƒ±sƒ±z. Tekrar deneniyor...")
			task.wait(2)
			serverHop()
		end
	else
		warn("üåê Uygun ba≈üka sunucu bulunamadƒ±.")
	end
end

-- üîÅ Rejoin
local function rejoinServer()
	local placeId = game.PlaceId
	local jobId = game.JobId
	TeleportService:TeleportToPlaceInstance(placeId, jobId, Players.LocalPlayer)
end

ServerhopSection:AddButton({
	Name = "üåê Server Hop (Rastgele)",
	Callback = function()
		serverHop()
	end
})

ServerhopSection:AddButton({
	Name = "üîÅ Aynƒ± Sunucuya Rejoin",
	Callback = function()
		rejoinServer()
	end
})
