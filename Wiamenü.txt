-- MadCity Men√º (Geli≈ümi≈ü Sekmeli S√ºr√ºm - Eksiksiz Versiyon)

local library = loadstring(game:GetObjects("rbxassetid://7657867786")[1].Source)()
local RunService = game:GetService('RunService')
local Players = game:GetService('Players')
local TeamsService = game:GetService("Teams")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Event = ReplicatedStorage:WaitForChild("Event")
local Mouse = Players.LocalPlayer:GetMouse()
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

local PepsisWorld = library:CreateWindow({
    Name = "",
    Themeable = { Info = "T√ºm sistemler tablara ayrƒ±ldƒ± | wialua" }
})

-- Tabs
local PvpTab = PepsisWorld:CreateTab({ Name = "‚öîÔ∏è PVP" })
local VehicleTab = PepsisWorld:CreateTab({ Name = "üöó Ara√ßlar" })
local ExtraTab = PepsisWorld:CreateTab({ Name = "üí∞ Ekstra" })
local AutoKillTab = PepsisWorld:CreateTab({ Name = "‚ò†Ô∏è Auto Kill" })
local HitboxTab = PepsisWorld:CreateTab({ Name = "üéØ Hitbox" })

-- ‚öîÔ∏è PVP
local CombatSection = PvpTab:CreateSection({ Name = "Sava≈ü Ara√ßlarƒ±" })
CombatSection:AddButton({ Name = "ESP A√ß", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/mdsp"))() end })
CombatSection:AddButton({ Name = "ESP Kapat", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/mdspclo"))() end })
CombatSection:AddButton({ Name = "Aim Lock", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/erdemscripterxd/wia/refs/heads/main/aimlck"))() end })

-- üöó Ara√ßlar
local VehicleSection = VehicleTab:CreateSection({ Name = "Ara√ß/U√ßak Hileleri" })
VehicleSection:AddButton({ Name = "Hƒ±zlƒ± Night D√∂nme", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/ilfafl"))() end })
VehicleSection:AddButton({ Name = "Suda Ara√ß S√ºrme", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/drve"))() end })
VehicleSection:AddButton({ Name = "Super Car", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/crspdorsm"))() end })

local VehicleSpawnSection = VehicleTab:CreateSection({ Name = "Ara√ß Spawnlama" })
local selectedVehicle = "Nighthawk"
VehicleSpawnSection:AddDropdown({
    Name = "Ara√ß Se√ß",
    List = {"Fury", "Rhino", "Nighthawk", "Light Bike", "Thunderbird", "Warhawk", "Buzzard"},
    Callback = function(v) selectedVehicle = v end
})
VehicleSpawnSection:AddButton({
    Name = "Se√ßilen Araca Bin",
    Callback = function()
        local char = LocalPlayer.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end
        local HRP = char.HumanoidRootPart
        local btp = Instance.new("Vector3Value", LocalPlayer)
        btp.Name = "btp"
        btp.Value = HRP.Position
        HRP.CFrame = Workspace.VehicleSpawns[selectedVehicle].Pos.CFrame
        wait()
        HRP.CFrame = CFrame.new(btp.Value)
        wait()
        local vehicle = Workspace.ObjectSelection[selectedVehicle]
        if vehicle then
            vehicle.DriveSeat.Disabled = false
            vehicle:MoveTo(HRP.Position)
            wait()
            HRP.CFrame = vehicle.DriveSeat.CFrame
            wait()
            vehicle.DriveSeat.Disabled = true
        end
        btp:Destroy()
    end
})

-- üöó Ara√ß Spawnlama (Event Sistemiyle)
local VehicleSpawnEventSection = VehicleTab:CreateSection({ Name = "Ara√ß Spawn (Sende Olanlar)" })
local selectedSpawnVehicle = "Fury"

VehicleSpawnEventSection:AddDropdown({
    Name = "Spawnlanacak Ara√ß",
    List = {"Fury", "Rhino", "Nighthawk", "Light Bike", "Thunderbird", "Warhawk", "Buzzard"},
    Callback = function(v) selectedSpawnVehicle = v end
})

VehicleSpawnEventSection:AddButton({
    Name = "Ara√ß Spawn (Sende Olanlar)",
    Callback = function()
        local args = {
            [1] = "SpawnVehicle",
            [2] = selectedSpawnVehicle
        }
        Event:FireServer(unpack(args))
    end
})


-- üí∞ Ekstra
local XPSection = ExtraTab:CreateSection({ Name = "XP & Para" })
XPSection:AddButton({ Name = "XP Scripti", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/exp"))() end })
XPSection:AddButton({ Name = "Auto Farm (Para)", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/auto%20farm%20(%20para%20)"))() end })
XPSection:AddButton({ Name = "Crash", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/crsh"))() end })
XPSection:AddButton({ Name = "Polis Keycard", Callback = function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/key"))() end })

-- ‚ò†Ô∏è Auto Kill V1
local AutoKillSection = AutoKillTab:CreateSection({ Name = "Auto Kill V1 (BM)" })
local function createAutoKillToggle(teamName)
    local team = TeamsService:WaitForChild(teamName)
    local connection = nil
    AutoKillSection:AddToggle({
        Name = teamName,
        Value = false,
        Callback = function(value)
            if connection then connection:Disconnect() connection = nil end
            if value then
                connection = RunService.RenderStepped:Connect(function()
                    for i = 1, 10 do
                        for _, player in pairs(team:GetPlayers()) do
                            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                                Event:FireServer("BM", player.Character.HumanoidRootPart.Position)
                            end
                        end
                    end
                end)
            end
        end
    })
end
for _, team in ipairs({"Prisoners", "Police", "Criminals", "Heroes", "Villains"}) do
    createAutoKillToggle(team)
end

-- ‚ò†Ô∏è Auto Kill V2 (BM + Buzzard)
local AutoKillV2Section = AutoKillTab:CreateSection({ Name = "Auto Kill V2 (Fps D√º≈ü√ºren Versiyon)" })
local function createAutoKillV2(teamName)
    local team = TeamsService:WaitForChild(teamName)
    local connection = nil
    AutoKillV2Section:AddToggle({
        Name = "V2: " .. teamName,
        Value = false,
        Callback = function(enabled)
            if connection then connection:Disconnect() connection = nil end
            if enabled then
                connection = RunService.Heartbeat:Connect(function()
                    for _, player in ipairs(team:GetPlayers()) do
                        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            local target = player.Character.HumanoidRootPart
                            Event:FireServer("BM", target.Position)
                            local vehicleName = LocalPlayer.Name .. "'s Vehicle"
                            local vehicle = Workspace:FindFirstChild("ObjectSelection"):FindFirstChild(vehicleName)
                            if vehicle and vehicle:FindFirstChild("Body") and vehicle.Body:FindFirstChild("RightMissile") then
                                local args = {
                                    [1] = "ShootBuzzardMissiles",
                                    [2] = Workspace:FindFirstChild(LocalPlayer.Name),
                                    [3] = vehicle:FindFirstChild("Body"),
                                    [4] = target,
                                    [5] = vehicle.Body:FindFirstChild("RightMissile"),
                                    [6] = 3
                                }
                                Event:FireServer(unpack(args))
                            end
                        end
                    end
                end)
            end
        end
    })
end
for _, team in ipairs({"Prisoners", "Police", "Criminals", "Heroes", "Villains"}) do
    createAutoKillV2(team)
end

-- üéØ Hitbox (Geli≈ümi≈ü ve Stabil)
local HitboxSection = HitboxTab:CreateSection({ Name = "Ayarlar" })
local selectedTeams = {}
local isHitboxEnabled = false
local lastSize = 3.8
local lastTransparency = 0.5
local lastColor = Color3.fromRGB(255, 0, 0)
local hitboxConnection

local function applyHitbox(player)
    if player and player.Character and player.Character:FindFirstChild("Head") then
        local head = player.Character.Head
        head.Size = Vector3.new(lastSize, lastSize, lastSize)
        head.Transparency = lastTransparency
        head.BrickColor = BrickColor.new(lastColor)
        head.CanCollide = false
        head.Material = Enum.Material.ForceField
    end
end

local function resetHitbox(player)
    if player and player.Character and player.Character:FindFirstChild("Head") then
        local head = player.Character.Head
        head.Size = Vector3.new(2, 1, 1)
        head.Transparency = 0
        head.BrickColor = BrickColor.new("Medium stone grey")
        head.CanCollide = true
        head.Material = Enum.Material.Plastic
    end
end

local function updateHitboxes()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Team and table.find(selectedTeams, player.Team.Name) then
            applyHitbox(player)
        else
            resetHitbox(player)
        end
    end
end

HitboxSection:AddToggle({
    Name = "Hitbox Aktif",
    Value = false,
    Callback = function(state)
        isHitboxEnabled = state
        if state then
            if hitboxConnection then hitboxConnection:Disconnect() end
            hitboxConnection = RunService.Heartbeat:Connect(updateHitboxes)
        else
            if hitboxConnection then
                hitboxConnection:Disconnect()
                hitboxConnection = nil
            end
            for _, player in ipairs(Players:GetPlayers()) do
                resetHitbox(player)
            end
        end
    end
})

HitboxSection:AddSlider({ Name = "Boyut", Min = 1, Max = 5, Value = lastSize, Callback = function(v) lastSize = v end })
HitboxSection:AddSlider({ Name = "≈ûeffaflƒ±k", Min = 0, Max = 1, Value = lastTransparency, Callback = function(v) lastTransparency = v end })
HitboxSection:AddColorPicker({ Name = "Renk", Value = lastColor, Callback = function(v) lastColor = v end })

local TeamSection = HitboxTab:CreateSection({ Name = "Takƒ±m Se√ßimi" })
for _, team in ipairs({"Prisoners", "Police", "Criminals", "Heroes", "Villains"}) do
    TeamSection:AddToggle({
        Name = team,
        Value = false,
        Callback = function(value)
            if value then
                if not table.find(selectedTeams, team) then
                    table.insert(selectedTeams, team)
                end
            else
                for i, t in ipairs(selectedTeams) do
                    if t == team then
                        table.remove(selectedTeams, i)
                        break
                    end
                end
            end
            if isHitboxEnabled then
                updateHitboxes()
            end
        end
    })
end

PepsisWorld:Display()
