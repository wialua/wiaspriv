-- üì¶ K√ºt√ºphane y√ºklemeleri (dosyanƒ±n ba≈üƒ±nda olmalƒ±)
local repo = 'https://raw.githubusercontent.com/violin-suzutsuki/LinoriaLib/main/'
local Library = loadstring(game:HttpGet(repo .. 'Library.lua'))()
local ThemeManager = loadstring(game:HttpGet(repo .. 'addons/ThemeManager.lua'))()
local SaveManager = loadstring(game:HttpGet(repo .. 'addons/SaveManager.lua'))()

local Window = Library:CreateWindow({
    Title = 'Wia Men√º | Sava≈ü Sistemi',
    Center = true,
    AutoShow = true
})

local Tabs = {
    Combat = Window:AddTab('ü•ä Sava≈ü'),
     Vehicles = Window:AddTab('üöò Ara√ßlar'),
     AutoKill = Window:AddTab("üöÄ Auto Kill"),
     Extra = Window:AddTab("üí∞ Extra"),
     System = Window:AddTab("üñ•Ô∏è Sistem"),
    ['UI Settings'] = Window:AddTab('UI Settings') 
}

-- Sava≈ü Grubu
local CombatBox = Tabs.Combat:AddLeftGroupbox('üéØ Hitbox + ESP')

-- Gerekli servisler
local Players = game:GetService("Players")
local Teams = game:GetService("Teams")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Event = ReplicatedStorage:WaitForChild("Event")
local UserInputService = game:GetService("UserInputService")

---------------------------
-- üî¥ HITBOX Sƒ∞STEMƒ∞
---------------------------

local hitboxEnabled = false
local hitboxLoop = nil
local appliedPlayers = {}
local hitboxSize = 8
local defaultSize = Vector3.new(2, 1, 1)
local hitboxColor = BrickColor.Red()
local hitboxTransparency = 0.6

local function isEnemyTeam(targetTeam)
    local myTeam = LocalPlayer.Team
    if not myTeam or not targetTeam then return false end

    local allyMap = {
        Police = { "Police", "Heroes" },
        Heroes = { "Police", "Heroes" },
        Prisoners = { "Prisoners", "Criminals", "Villains" },
        Criminals = { "Prisoners", "Criminals", "Villains" },
        Villains = { "Prisoners", "Criminals", "Villains" }
    }

    local allies = allyMap[myTeam.Name] or {}
    return not table.find(allies, targetTeam.Name)
end

local function applyHeadHitbox(player)
    if not player or not player.Character or not isEnemyTeam(player.Team) then return end

    local head = player.Character:FindFirstChild("Head")
    if not head or not head:IsA("BasePart") then return end
    if appliedPlayers[player] == hitboxSize then return end

    head.Size = Vector3.new(hitboxSize, hitboxSize, hitboxSize)
    head.Transparency = hitboxTransparency
    head.BrickColor = hitboxColor
    head.CanCollide = false
    head.Material = Enum.Material.Plastic
    head.Massless = true

    appliedPlayers[player] = hitboxSize
end

local function resetHead(player)
    local head = player.Character and player.Character:FindFirstChild("Head")
    if head and head:IsA("BasePart") then
        head.Size = defaultSize
        head.Transparency = 0
        head.BrickColor = BrickColor.new("Medium stone grey")
        head.CanCollide = true
        head.Material = Enum.Material.Plastic
    end
    appliedPlayers[player] = nil
end

local function startHitboxLoop()
    if hitboxLoop then hitboxLoop:Disconnect() end
    hitboxLoop = RunService.Heartbeat:Connect(function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                applyHeadHitbox(player)
            end
        end
    end)
end

local function stopHitboxLoop()
    if hitboxLoop then hitboxLoop:Disconnect() hitboxLoop = nil end
    for _, player in ipairs(Players:GetPlayers()) do
        resetHead(player)
    end
end

-- Karakter spawn reseti
local function bindPlayer(player)
    player.CharacterAdded:Connect(function(char)
        if not hitboxEnabled then return end
        for i = 1, 30 do
            task.wait(0.1)
            if char:FindFirstChild("Head") then break end
        end
        task.wait(0.25)
        applyHeadHitbox(player)
    end)
end

for _, p in ipairs(Players:GetPlayers()) do bindPlayer(p) end
Players.PlayerAdded:Connect(bindPlayer)

-- üîò Hitbox Toggle
CombatBox:AddToggle('HitboxToggle', {
    Text = 'üéØ Head Hitbox',
    Default = false,
    Callback = function(state)
        hitboxEnabled = state
        if state then startHitboxLoop() else stopHitboxLoop() end
    end
})

-- üìè Head Boyutu
CombatBox:AddSlider('HeadSizeSlider', {
    Text = 'Head Boyutu',
    Min = 2,
    Max = 25,
    Default = 8,
    Rounding = 0,
    Callback = function(val)
        hitboxSize = val
        if hitboxEnabled then
            for _, p in ipairs(Players:GetPlayers()) do
                appliedPlayers[p] = nil
            end
        end
    end
})

---------------------------
-- üü¢ ESP Sƒ∞STEMƒ∞
---------------------------

local function fixNameTag(player)
    local function apply()
        local char = player.Character
        if not char then return end
        local nameTag = char:FindFirstChild("NameTag")
        if nameTag then
            nameTag.AlwaysOnTop = true
            nameTag.MaxDistance = 10000
        end
    end

    if player.Character then apply() end

    player.CharacterAdded:Connect(function(char)
        char:WaitForChild("NameTag", 10)
        apply()
        local nameTag = char:FindFirstChild("NameTag")
        if nameTag then
            nameTag:GetPropertyChangedSignal("AlwaysOnTop"):Connect(function()
                nameTag.AlwaysOnTop = true
            end)
        end
    end)
end

local function disableESP()
    for _, player in pairs(Players:GetChildren()) do
        local character = player.Character or player.CharacterAdded:Wait()
        local nameTag = character:FindFirstChild("NameTag")
        if nameTag then
            nameTag.AlwaysOnTop = false
            nameTag.MaxDistance = 10000
        end
    end
end

CombatBox:AddToggle('ESPToggle', {
    Text = 'üëÄ ESP',
    Default = false,
    Callback = function(state)
        if state then
            for _, player in ipairs(Players:GetPlayers()) do
                fixNameTag(player)
            end
            Players.PlayerAdded:Connect(fixNameTag)
        else
            disableESP()
        end
    end
})

---------------------------
-- üé® Tema / Config
---------------------------

ThemeManager:SetLibrary(Library)
SaveManager:SetLibrary(Library)

SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({ 'MenuKeybind' })

ThemeManager:SetFolder('MyScriptHub')
SaveManager:SetFolder('MyScriptHub/specific-game')
SaveManager:BuildConfigSection(Tabs['UI Settings'])
ThemeManager:ApplyToTab(Tabs['UI Settings'])
SaveManager:LoadAutoloadConfig()

-- üöó Ara√ß Spawn Kutusu
local Event = game:GetService("ReplicatedStorage"):WaitForChild("Event")
local VehicleSpawnBox = Tabs.Vehicles:AddLeftGroupbox('üöó Ara√ß Spawn')

local selectedVehicle = "Nero"

VehicleSpawnBox:AddDropdown('Ara√ßListesi', {
    Text = 'Ara√ß Se√ß',
    Values = { "Nero", "Rhino", "Nighthawk", "Light Bike", "Thunderbird", "Warhawk", "Buzzard", "Fury" },
    Default = 1,
    Callback = function(v)
        selectedVehicle = v
    end
})

VehicleSpawnBox:AddButton({
    Text = 'üöò Spawnla',
    Func = function()
        if selectedVehicle and selectedVehicle ~= "" then
            Event:FireServer("SpawnVehicle", selectedVehicle)
        end
    end
})

VehicleSpawnBox:AddButton({
    Text = '‚ö° Spawnlanana Bin',
    Func = function()
        local char = LocalPlayer.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end
        local HRP = char.HumanoidRootPart
        local btp = Instance.new("Vector3Value", LocalPlayer)
        btp.Name = "btp"
        btp.Value = HRP.Position

        HRP.CFrame = Workspace.VehicleSpawns[selectedVehicle].Pos.CFrame
        task.wait()
        HRP.CFrame = CFrame.new(btp.Value)

        local vehicle = Workspace.ObjectSelection[selectedVehicle]
        if vehicle then
            vehicle.DriveSeat.Disabled = false
            vehicle:MoveTo(HRP.Position)
            task.wait()
            HRP.CFrame = vehicle.DriveSeat.CFrame
            task.wait()
            vehicle.DriveSeat.Disabled = true
        end

        btp:Destroy()
    end
})

-- ‚öôÔ∏è Performans Kutusu
local BoostBox = Tabs.Vehicles:AddRightGroupbox('üõ†Ô∏è Performans & Boost')

BoostBox:AddButton({
    Text = 'Super Car',
    Func = function()
        local props = {
            Torque = 7,
            MaxSpeed = 200,
            TurnSpeed = 1.7,
            DriftVelLerp = 0.45,
            DriftRotLerp = 0.12,
            Suspension = 1, -- ‚úÖ Yeni eklenen deƒüer
        }

        for _, v in pairs(getgc(true)) do
            if type(v) == "table" then
                for prop, val in pairs(props) do
                    if rawget(v, prop) ~= nil then
                        v[prop] = val
                    end
                end
            end
        end

        local playerVehicle = Workspace.ObjectSelection:FindFirstChild(LocalPlayer.Name.."'s Vehicle")
        if playerVehicle then
            pcall(function()
                local chassis = playerVehicle:FindFirstChild("CarChassis")
                if chassis then
                    local boost = chassis:FindFirstChild("Boost")
                    if boost then
                        boost.Value = 20
                    end
                end
            end)
        end
    end
})


BoostBox:AddButton({
    Text = '‚úàÔ∏è Hƒ±zlƒ± D√∂n√º≈ü (U√ßak)',
    Func = function()
        local props = {
            Acceleration = 1,
            HorizontalTiltSpeed = 7.3,
            MissileCooldown = 2,
            MissileLock = 0,
            SideTiltSpeed = 1.5,
            MaxSideTilt = 25,
        }

        for _, v in pairs(getgc(true)) do
            if type(v) == "table" then
                for prop, val in pairs(props) do
                    if rawget(v, prop) ~= nil then
                        v[prop] = val
                    end
                end
            end
        end
    end
})

local bombingEnabled = false

BoostBox:AddButton({
    Text = 'üí£ G Tu≈üuna Bombalama Aktif Et',
    Func = function(btn)
        if bombingEnabled then
            game.StarterGui:SetCore("SendNotification", {
                Title = "Zaten Aktif",
                Text = "Bu √∂zellik zaten aktif!",
                Duration = 3
            })
            return
        end

        _G.BombInput = UserInputService.InputBegan:Connect(function(input, gameProcessed)
            if not gameProcessed and input.KeyCode == Enum.KeyCode.G then
                Event:FireServer("DropBomb")
            end
        end)

        bombingEnabled = true
        btn:SetText("‚úÖ Bombalama Aktif")
        btn.Interactable = false

        game.StarterGui:SetCore("SendNotification", {
            Title = "Aktif!",
            Text = "G tu≈üuna bombalama etkinle≈ütirildi.",
            Duration = 4
        })
    end
})


-- üíª √ñzel Ara√ß Hileleri Kutusu
local CheatBox = Tabs.Vehicles:AddRightGroupbox('üíª Ara√ß Hileleri')

CheatBox:AddButton({
    Text = 'üåä Suda Ara√ß S√ºr',
    Func = function()
        for _, v in pairs(Workspace.Water:GetChildren()) do
            v.CanCollide = true
            v.Anchored = true
            v.Material = "Ice"
            v:Clone().Parent = v.Parent
            v:Destroy()
        end
        for _, v in pairs(Workspace:GetDescendants()) do
            if v.Name == "Ocean" then v.Name = "NotWater" end
        end
        local newfolder = Instance.new("Folder")
        newfolder.Name = "Water"
        newfolder.Parent = Workspace
        task.wait(0.1)
        Workspace.Water.Name = "NotWaterBruh"
    end
})

CheatBox:AddToggle('StealthToggle', {
    Text = 'üï∂Ô∏è Sonsuz Stealth (Night)',
    Default = false,
    Callback = function(state)
        if state then
            _G.StealthLoop = RunService.RenderStepped:Connect(function()
                pcall(function()
                    Event:FireServer("StealthMode", true)
                end)
            end)
        else
            pcall(function()
                Event:FireServer("StealthMode", false)
                task.wait(0.2)
                Event:FireServer("StealthMode", false)
            end)
            if _G.StealthLoop then
                _G.StealthLoop:Disconnect()
                _G.StealthLoop = nil
            end
        end
    end
})

-- üì¶ Servisler
local TeamsService = game:GetService("Teams")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local Event = ReplicatedStorage:WaitForChild("Event")

-- üõ°Ô∏è Kara Liste
local blacklist = {
	["MAD_CITYAIMBOTLOL"] = true
}

-- üì¶ Grup Kutusu: Auto Kill V1 (Takƒ±m Bazlƒ±)
local AutoKillTeamV1Box = Tabs.AutoKill:AddRightGroupbox("üìç Auto Kill V1 (Takƒ±m Bazlƒ±)")

-- üîÅ Toggle Olu≈üturucu
local function createAutoKillV1Toggle(teamName)
	local team = TeamsService:FindFirstChild(teamName)
	if not team then return end

	local isActive = false
	local killThread = nil

	AutoKillTeamV1Box:AddToggle("AutoKillV1_" .. teamName, {
		Text = teamName,
		Default = false,
		Callback = function(state)
			isActive = state

			if state then
				if killThread then return end
				killThread = task.spawn(function()
					while isActive do
						for _, player in ipairs(team:GetPlayers()) do
							if player ~= LocalPlayer and player.Character and not blacklist[player.Name] then
								for _, part in ipairs(player.Character:GetDescendants()) do
									if part:IsA("BasePart") then
										Event:FireServer("BM", part.Position)
									end
								end
							end
						end
						task.wait()
					end
				end)
			else
				if killThread then
					pcall(function()
						task.cancel(killThread)
					end)
					killThread = nil
				end
			end
		end
	})
end

-- üîÅ Her takƒ±m i√ßin toggle olu≈ütur
for _, team in ipairs({ "Prisoners", "Police", "Criminals", "Heroes", "Villains" }) do
	createAutoKillV1Toggle(team)
end

-- üì¶ Gerekli Tanƒ±mlar
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Event = ReplicatedStorage:WaitForChild("Event")

-- üéØ Auto Kill Sekmesine kutu ekle
local AutoKillPlayerBox = Tabs.AutoKill:AddLeftGroupbox("üéØ Oyuncuya √ñzel Auto Kill")

-- üîÅ Deƒüi≈ükenler
local selectedPlayerName = ""
local killThread = nil

local blacklist = {
    ["MAD_CITYAIMBOTLOL"] = true
}

-- üîÑ Oyuncu Listesi
local function getUpdatedPlayerList()
    local list = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(list, player.Name)
        end
    end
    return list
end

-- üéØ Dropdown
local playerDropdown = AutoKillPlayerBox:AddDropdown("TargetPlayerDropdown", {
    Text = "Hedef Oyuncu",
    Values = getUpdatedPlayerList(),
    Default = 1,
    Callback = function(playerName)
        if blacklist[playerName] then
            game.StarterGui:SetCore("SendNotification", {
                Title = "‚ùå Kara Listede",
                Text = playerName .. " BM'den muaf!",
                Duration = 4
            })
            selectedPlayerName = ""
        else
            selectedPlayerName = playerName
            print("[AutoKill] Se√ßilen hedef:", selectedPlayerName)
        end
    end
})

-- ‚úÖ Hedef oyuncu deƒüerini doƒürudan dropdown'dan √ßek (ilk ba≈üta se√ßilmezse diye)
selectedPlayerName = Options.TargetPlayerDropdown.Value or getUpdatedPlayerList()[1] or ""

-- üîÅ Oyuncular eklenirse listeleri g√ºncelle
local function refreshDropdown()
    playerDropdown:UpdateValues(getUpdatedPlayerList())
end
Players.PlayerAdded:Connect(refreshDropdown)
Players.PlayerRemoving:Connect(refreshDropdown)

-- üí• BM Atƒ±cƒ± Fonksiyon
local function fireFullBMOnce(player)
    if not player or not player.Character then return end
    for _, part in ipairs(player.Character:GetDescendants()) do
        if part:IsA("BasePart") then
            Event:FireServer("BM", part.Position)
        end
    end
end

-- üîÅ Auto Kill Loop
local function startTrueKill()
    if killThread then return end
    print("[AutoKill] Ba≈ülatƒ±ldƒ±.")
    killThread = RunService.Heartbeat:Connect(function()
        local target = Players:FindFirstChild(selectedPlayerName)
        if target and not blacklist[selectedPlayerName] then
            fireFullBMOnce(target)
        end
    end)
end

local function stopTrueKill()
    if killThread then
        print("[AutoKill] Durduruldu.")
        killThread:Disconnect()
        killThread = nil
    end
end

-- üîò Toggle
AutoKillPlayerBox:AddToggle("AutoKillToggle", {
    Text = "Auto Kill Aktif",
    Default = false,
    Callback = function(state)
        if state then
            if selectedPlayerName == "" then
                warn("[AutoKill] Hedef se√ßilmemi≈ü.")
            else
                startTrueKill()
            end
        else
            stopTrueKill()
        end
    end
})

-- üî• FPS Siken Auto Kill V4 (Oyuncu + Takƒ±m)

local selectedTargetV4 = ""
local selectedTeamV4 = ""
local missileLoopV4 = nil
local teamMissileLoopV4 = nil

-- F√ºze spam fonksiyonu
local function explodePlayerParts(player)
    if blacklist[player.Name] then return end
    if player and player.Character then
        for _, part in ipairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                for i = 1, 20 do
                    Event:FireServer("ShootBuzzardMissiles", player.Character, part, part, part, 3)
                end
            end
        end
    end
end

-- Oyuncu listesi
local function getPlayerList()
    local list = {}
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then
            table.insert(list, p.Name)
        end
    end
    return list
end

-- Takƒ±m listesi
local function getTeamList()
    local list = {}
    for _, team in ipairs(Teams:GetChildren()) do
        table.insert(list, team.Name)
    end
    return list
end

-- üì¶ Groupbox 1: Oyuncuya √ñzel
local V4PlayerBox = Tabs.AutoKill:AddLeftGroupbox("üí• V4 - Oyuncuya √ñzel")

local playerDropdownV4 = V4PlayerBox:AddDropdown("V4PlayerSelect", {
    Text = "FPS'i Sikeceƒüin Oyuncu",
    Values = getPlayerList(),
    Default = 1,
    Callback = function(name)
        selectedTargetV4 = name
    end
})

selectedTargetV4 = getPlayerList()[1] or ""


local function refreshPlayerDropdown()
    playerDropdownV4:UpdateValues(getPlayerList())
end
Players.PlayerAdded:Connect(refreshPlayerDropdown)
Players.PlayerRemoving:Connect(refreshPlayerDropdown)

V4PlayerBox:AddToggle("V4PlayerToggle", {
    Text = "üéØ FPS'i Sƒ∞K (Oyuncu)",
    Default = false,
    Callback = function(state)
        if state and selectedTargetV4 ~= "" then
            if missileLoopV4 then return end
            missileLoopV4 = task.spawn(function()
                while true do
                    local player = Players:FindFirstChild(selectedTargetV4)
                    if player then
                        explodePlayerParts(player)
                    end
                    task.wait()
                end
            end)
        else
            if missileLoopV4 then
                pcall(function() task.cancel(missileLoopV4) end)
                missileLoopV4 = nil
            end
        end
    end
})

-- üì¶ Groupbox 2: Takƒ±ma √ñzel
local V4TeamBox = Tabs.AutoKill:AddRightGroupbox("üí• V4 - Takƒ±ma √ñzel")

local teamDropdownV4 = V4TeamBox:AddDropdown("V4TeamSelect", {
    Text = "FPS'i Sikeceƒüin Takƒ±m",
    Values = getTeamList(),
    Default = 1,
    Callback = function(name)
        selectedTeamV4 = name
    end
})

V4TeamBox:AddToggle("V4TeamToggle", {
    Text = "üë• FPS'i Sƒ∞K (Takƒ±m)",
    Default = false,
    Callback = function(state)
        if state and selectedTeamV4 ~= "" then
            local team = Teams:FindFirstChild(selectedTeamV4)
            if team and not teamMissileLoopV4 then
                teamMissileLoopV4 = task.spawn(function()
                    while true do
                        for _, player in ipairs(team:GetPlayers()) do
                            explodePlayerParts(player)
                        end
                        task.wait()
                    end
                end)
            end
        else
            if teamMissileLoopV4 then
                pcall(function() task.cancel(teamMissileLoopV4) end)
                teamMissileLoopV4 = nil
            end
        end
    end
})

-- üì¶ Extra Sekmesi: Para / XP / Ara√ßlar
local XPBox = Tabs.Extra:AddLeftGroupbox("üí∞ Para / XP / Ara√ßlar")

-- üí∏ Auto Farm Para
XPBox:AddButton({
    Text = "Auto Farm Para",
    Func = function()
        getgenv().fps = false
        getgenv().whitescreen = false
        getgenv().Arrest = false
        loadstring(game:HttpGet("https://raw.githubusercontent.com/AdminEvilDRagon/smallAR/refs/heads/main/SmallAR.lua", true))()
    end
})

-- üõÇ Keycard √áek
XPBox:AddButton({
    Text = "Keycard √áek",
    Func = function()
        for i = 1, 50 do
            for _, v in pairs(Players:GetChildren()) do
                local args = {
                    [1] = "Pickpocket",
                    [2] = v
                }
                Event:FireServer(unpack(args))
            end
        end
    end
})

-- ‚ö° XP Scripti
XPBox:AddButton({
    Text = "XP Scripti",
    Func = function()
        ReplicatedStorage.RemoteFunction:InvokeServer("SetTeam", "Police")
        task.wait(0.5)
        for _, v in pairs(LocalPlayer.Backpack:GetChildren()) do
            if v.Name == "Handcuffs" then
                v.Parent = LocalPlayer.Character
            end
        end
        for i = 1, 1000 do  
            RunService.RenderStepped:Connect(function()
                Event:FireServer("Eject", LocalPlayer)
            end)
        end
    end
})

-- üí• Server Crash
XPBox:AddButton({
    Text = "üí• Server Crash",
    Func = function()
        local plr = LocalPlayer
        if plr.Backpack:FindFirstChild("Shotgun") == nil then
            game.StarterGui:SetCore("SendNotification",{     
                Title = "Uyarƒ±",     
                Text = "Shotgun envanterinde ve elinde olmalƒ±!",
                Duration = 5
            })
        else
            local char = plr.Character
            for i = 1, 20 do task.wait()
                workspace.ObjectSelection.Shotgun.Shotgun.Shotgun.Event:FireServer()
            end
            char.Humanoid:EquipTool(plr.Backpack.Shotgun)
            for i = 1, 8000 do
                ReplicatedStorage.Event:FireServer("ShootShotgun", workspace[plr.Name], Vector3.new(0, 0, 0), "Shotgun", "inf", "inf", "inf")
            end
            game.StarterGui:SetCore("SendNotification",{     
                Title = "C R A S H",     
                Text = "Sunucu √ß√∂kt√º!",
                Duration = 7 
            })
        end
    end
})

local ServerhopBox = Tabs.System:AddLeftGroupbox("üß© Sunucu ƒ∞≈ülemleri")

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local menuURL = "https://raw.githubusercontent.com/wialua/wiaspriv/refs/heads/main/Wiamen√º.txt"

-- ‚úÖ Rejoin Fonksiyonu
local function forceRejoin()
	local tpCode = string.format("loadstring(game:HttpGet('%s'))()", menuURL)
	if syn and syn.queue_on_teleport then
		syn.queue_on_teleport(tpCode)
	elseif queue_on_teleport then
		queue_on_teleport(tpCode)
	end
	TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
end

-- üåê Server Hop Fonksiyonu
local function advancedServerHop(mode)
	local placeId = game.PlaceId
	local currentJobId = game.JobId
	local servers = {}

	local function getServers(cursor)
		local url = "https://games.roblox.com/v1/games/"..placeId.."/servers/Public?limit=100"
		if cursor then url = url.."&cursor="..cursor end

		local success, result = pcall(function()
			return HttpService:JSONDecode(game:HttpGet(url))
		end)

		if success and result and result.data then
			for _, server in ipairs(result.data) do
				if server.id ~= currentJobId then
					local playing = server.playing
					local max = server.maxPlayers
					if mode == "bo≈ü" and playing < max / 2 then
						table.insert(servers, server.id)
					elseif mode == "dolu" and playing >= max / 2 then
						table.insert(servers, server.id)
					elseif mode == "herhangi" then
						table.insert(servers, server.id)
					end
				end
			end
			if result.nextPageCursor then
				getServers(result.nextPageCursor)
			end
		end
	end

	getServers()

	if #servers > 0 then
		local target = servers[math.random(1, #servers)]
		local tpCode = string.format("loadstring(game:HttpGet('%s'))()", menuURL)

		if syn and syn.queue_on_teleport then
			syn.queue_on_teleport(tpCode)
		elseif queue_on_teleport then
			queue_on_teleport(tpCode)
		end

		local function tryTeleport()
			local success, err = pcall(function()
				TeleportService:TeleportToPlaceInstance(placeId, target, LocalPlayer)
			end)
			if not success then
				warn("‚ùå Teleport ba≈üarƒ±sƒ±z. Tekrar deneniyor...")
				task.wait(2)
				tryTeleport()
			end
		end

		tryTeleport()
	else
		warn("‚ö†Ô∏è Uygun sunucu bulunamadƒ±.")
	end
end

ServerhopBox:AddButton({
	Text = "üîÅ Garantili Rejoin",
	Func = function()
		forceRejoin()
	end
})

ServerhopBox:AddButton({
	Text = "üåê Server Hop (Bo≈ü Sunucu)",
	Func = function()
		advancedServerHop("bo≈ü")
	end
})

ServerhopBox:AddButton({
	Text = "üåê Server Hop (Dolu Sunucu)",
	Func = function()
		advancedServerHop("dolu")
	end
})

ServerhopBox:AddButton({
	Text = "üåê Server Hop (Rastgele)",
	Func = function()
		advancedServerHop("herhangi")
	end
})

-- üîì Ara√ß Kilit A√ßma Kutusu
local VehicleLockBox = Tabs.Vehicles:AddLeftGroupbox("üîì Ara√ß Kilitleri")

local unlockLoop

VehicleLockBox:AddToggle('UnlockAllVehiclesToggle', {
    Text = 'Herkesin Ara√ß Kilidini OFF Yap',
    Default = false,
    Callback = function(state)
        if state then
            unlockLoop = RunService.Heartbeat:Connect(function()
                for _, player in ipairs(Players:GetPlayers()) do
                    local vehicle = Workspace:FindFirstChild("ObjectSelection") and Workspace.ObjectSelection:FindFirstChild(player.Name .. "'s Vehicle")
                    if vehicle and vehicle:FindFirstChild("VehicleLock") then
                        vehicle.VehicleLock.Value = "OFF"
                    end
                end
            end)
        else
            if unlockLoop then
                unlockLoop:Disconnect()
                unlockLoop = nil
            end
        end
    end
})

-- G√ºncellenmi≈ü "üö´ Lazerleri Sil" butonu
CombatBox:AddButton({
    Text = "üö´ Lazerleri Sil",
    Func = function()
        local namesToRemove = {
            "Lasers",
            "Lasers Club",
            "FireTrap",
            "SpikeSwing",
            "SpikeTrap"
        }

        for _, obj in pairs(Workspace.Ignore.WorldObjects:GetChildren()) do
            if table.find(namesToRemove, obj.Name) then
                pcall(function()
                    obj:Destroy()
                end)
            end
        end

        local extraIndexes = {14, 15, 18, 19}
        local children = Workspace.Ignore.WorldObjects:GetChildren()
        for _, index in pairs(extraIndexes) do
            local obj = children[index]
            if obj and typeof(obj) == "Instance" and obj.Destroy then
                pcall(function()
                    obj:Destroy()
                end)
            end
        end

        local laserPaths = {
            Workspace.Casino.CasinoDoor.SpinLaser1.Parts.Laser1,
            Workspace.Casino.CasinoDoor.SpinLaser1.Parts.Laser2,
            Workspace.Casino.CasinoDoor.SpinLaser2.Parts.Laser1,
            Workspace.Casino.CasinoDoor.SpinLaser2.Parts.Laser2,
            Workspace.Casino.CasinoDoor.SpinLaser3.Parts.Laser1,
            Workspace.Casino.CasinoDoor.SpinLaser3.Parts.Laser2,
            Workspace.Club.SlideLaser.Laser,
            Workspace.Club.SlideLaser.Pivot,
            Workspace.ComputerStore.Lasers.Parts.Line,
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[2],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[5],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[6],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[7],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[8],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[9],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[10],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[11],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[12],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[13],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[14],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[15],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[16],
            Workspace.ComputerStore.Lasers.Parts:GetChildren()[17],
            Workspace.JewelryStore.JewelryVent.Laser,
            Workspace.JewelryStore.SlideLaser.Laser,
            Workspace.JewelryStore.SlideLaser.Pivot,
            Workspace.JewelryStore.SpinLaser.Parts.Laser1,
            Workspace.JewelryStore.SpinLaser.Parts.Laser2,
            Workspace.JewelryStore.SpinLaser2.Parts.Laser1,
            Workspace.JewelryStore.SpinLaser2.Parts.Laser2,
            Workspace.JewelryStore.SpinLaser3.Parts.Laser1,
            Workspace.JewelryStore.SpinLaser3.Parts.Laser2,
            Workspace.JewelryStore.SpinLaser4.Parts.Laser1,
            Workspace.JewelryStore.SpinLaser4.Parts.Laser2,
            Workspace.JewelryStore.SpinLaser5.Parts.Laser1,
            Workspace.JewelryStore.SpinLaser5.Parts.Laser2,
            Workspace.JewelryStore.Jewlery.Lasers.Parts.Line,
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[2],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[3],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[4],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[5],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[6],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[7],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[8],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[9],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[13],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[15],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[16],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[17],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[19],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[24],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[26],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[27],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[28],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[31],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[33],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[34],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[36],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[37],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[38],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[39],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[40],
            Workspace.JewelryStore.Jewlery.Lasers.Parts:GetChildren()[41],
        }

        for _, obj in ipairs(laserPaths) do
            pcall(function()
                if obj and obj.Destroy then
                    obj:Destroy()
                end
            end)
        end
    end
})


local MenuGroup = Tabs['UI Settings']:AddLeftGroupbox('Menu')

-- I set NoUI so it does not show up in the keybinds menu
MenuGroup:AddButton('Men√ºy√º yok et', function() Library:Unload() end)
MenuGroup:AddLabel('Men√º Tu≈üu'):AddKeyPicker('MenuKeybind', { Default = 'F4', NoUI = true, Text = 'Menu keybind' })

Library.ToggleKeybind = Options.MenuKeybind -- Allows you to have a custom keybind for the menu
